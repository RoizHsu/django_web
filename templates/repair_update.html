{% block content %}
{% load static %}
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>XXè‚¡ä»½æœ‰é™å…¬å¸-ç¶­ä¿®å–®ç®¡ç†ç³»çµ±</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'css/style260122.css' %}" />
    <link rel="stylesheet" href="{% static 'css/sheet.css' %}">
    <script src="{% static 'js/JavaScript.js' %}"></script>
    <script src="{% static 'js/faeye.js' %}"></script>
  </head>
  <body class="login-bg">
    <!-- é ‚éƒ¨å°è¦½ -->
    <header>
      <div class="container">
        <nav>
          <!-- å…¬å¸åç¨± -->
          <div class="nav-brand">âœ¨ XXè‚¡ä»½æœ‰é™å…¬å¸ - ç¶­ä¿®å–®ç®¡ç†ç³»çµ±</div>
          
          <!-- å…¶ä»–å°èˆª -->
          <ul>
            <li>
              <a href="{% url 'index' %}">é¦–é å…¬å‘Š</a>
            </li>
            <li><!--ç§»é™¤å·¢ç‹€ <a>ï¼Œä¸”ä¿®æ”¹meicon nav-link-->
              <a class="meicon nav-link" href="{% url 'repair' %}">
                <img src="{% static 'img/edit.gif' %}" width="30" height="30"/>ç¶­ä¿®å–®
              </a>
            </li>
            <li>
              <a href="#">æœå‹™</a>
            </li>
            <li>
              <a href="#">è¯çµ¡æ–¹å¼</a>
            </li>
            <!--ä½¿ç”¨è€…ç™»å…¥ç™»å‡ºåˆ‡æ›-->
            {% if user.is_authenticated %}
            <li>
              <a class="meicon" id="workspace">
                <img src="{% static 'img/dossier.gif' %}" width="30" height="30" />æ­¡è¿å›ä¾†
                {{ request.user.profile.user_name|default:request.user.username }}</a>
            </li>
            <li class="meicon">
              <img src="{% static 'img/logout.gif' %}" width="30" height="30" />
              <a class="nav-link" href="{% url 'logout' %}">{{ repair.get_repair_user_name }}ç™»å‡º</a>
            </li>
            {% else %}
            <li>
              <a class="meicon" id="workspace">
                <img src="{% static 'img/dossier.gif' %}" width="30" height="30" /> æ­¡è¿ï¼Œè«‹ç™»å…¥
                {{ request.user }} </a>
            </li>
            <li class="meicon">
              <img src="{% static 'img/logout.gif' %}" width="30" height="30" />
              <a class="nav-link" href="{% url 'login' %}">{{ repair.get_repair_user_name }}ç™»å…¥</a>
            </li>
            {% endif %}
          </ul>
        </nav>
      </div>
    </header>

  <!-- å°èˆªé¸å–® -->

  <div class="nav-container">
      <div class="nav-tabs">
        <div class="time-chip">
          <span class="time-label">æ™‚é–“ï¼š</span>
          <span id="currentTime">è¼‰å…¥ä¸­...</span>
        </div>
      </div>
  </div>

    <section class="content-card update-container">
      <h2>ğŸ“ ä¿®æ”¹ç¶­ä¿®å–®</h2>
      <p class="form-hint">è«‹ç¢ºèªä¸‹åˆ—è³‡æ–™æ­£ç¢ºç„¡èª¤å¾Œæäº¤</p>
      
      <form action="" method="POST" class="update-form">
        {% csrf_token %}
        
        <!-- ç¬¬ä¸€è¡Œï¼šIPã€åˆ†æ©Ÿã€å«ä¿®äººã€è‚¡åˆ¥ -->
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>{{ repair.ip.label }}ï¼š</label>
            {{ repair.ip }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.ext.label }}ï¼š</label>
            {{ repair.ext }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.name.label }}ï¼š</label>
            {{ repair.name }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.share.label }}ï¼š</label>
            {{ repair.share }}
          </div>
        </div>
        
        <!-- ç¬¬äºŒè¡Œï¼šè·ç¨±ã€ä½ç½®ã€æ¨“å±¤ã€ç§‘å®¤ -->
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>{{ repair.jt.label }}ï¼š</label>
            {{ repair.jt }}
          </div>
          {{ repair.repair_user }}
          <div class="form-group col-md-6">
            <label>{{ repair.location.label }}ï¼š</label>
            {{ repair.location }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.F.label }}ï¼š</label>
            {{ repair.F }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.office.label }}ï¼š</label>
            {{ repair.office }}
          </div>
        </div>
        
        <!-- å ±ä¿®å•é¡Œã€å›å¾©å ±ä¿® -->
        <div class="form-rowQA">
          <div class="form-group col-md-12">
            <label>{{ repair.Q.label }}ï¼š</label>
            {{ repair.Q }}
          </div>
          <div class="form-group col-md-12">
            <label>{{ repair.A.label }}ï¼š</label>
            {{ repair.A }}
          </div>
        </div>
        
        <!-- ç‹€æ…‹ã€ç¶­ä¿®æ™‚é–“ã€ç¶­ä¿®çµæŸ -->
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>{{ repair.state.label }}ï¼š</label>
            {{ repair.state }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.start.label }}ï¼š</label>
            {{ repair.start }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.finish.label }}ï¼š</label>
            {{ repair.finish }}
          </div>
        </div>
        
        <!-- æŒ‰éˆ•å€ -->
        <div class="form-actions">
          <button class="btn btn-primary" type="submit">âœ” æ›´æ–°</button>
          <a href="{% url 'repair' %}" class="btn btn-secondary">â† è¿”å›åˆ—è¡¨</a>
        </div>
      </form>
    </section>
    
{% endblock  %}
    <script>
      function updateTime() {
        const now = new Date() //æŠ“å–ç•¶ä¸‹æ™‚é–“
      
        //ç²å–å„å€‹æ™‚é–“éƒ¨ä»½
        const year = now.getFullYear() + 'å¹´'
        const month = String(now.getMonth() + 1).padStart(2, '0') + 'æœˆ'
        const day = String(now.getDate()).padStart(2, '0') + 'æ—¥ '
        const hours = String(now.getHours()).padStart(2, '0') + ':'
        const minutes = String(now.getMinutes()).padStart(2, '0') + ':'
        const seconds = String(now.getSeconds()).padStart(2, '0')
        //æ ¼å¼åŒ–æ•¸å­— å°æ–¼10è£œé›¶
        const formattedMinutes = minutes < 10 ? '0' + minutes : minutes
        const formattedSeconds = seconds < 10 ? '0' + seconds : seconds
        //çµ„åˆè¦é¡¯ç¤ºçš„æ™‚é–“
        const timeString = `${year}${month}${day}${hours}${formattedMinutes}${formattedSeconds}`
        //é¡¯ç¤ºåœ¨æŒ‡å®šä½ç½®
        document.getElementById('currentTime').textContent = timeString
      }
      //æ¯ç§’æ›´æ–°ä¸€æ¬¡æ™‚é–“
      setInterval(updateTime, 1000)
      //åˆå§‹å‘¼å«ä¸€æ¬¡ä»¥é¡¯ç¤ºæ™‚é–“
      updateTime()

      // è‡ªå‹•éš±è—è¨Šæ¯ï¼ˆ10ç§’å¾Œï¼‰ å‘¼æ‡‰62-71è¡Œ
      window.addEventListener('DOMContentLoaded', function() {
        const messages = document.querySelectorAll('.alert');
        messages.forEach(function(message) {
          setTimeout(function() {
            message.style.transition = 'opacity 0.5s ease-out';
            message.style.opacity = '0';
            setTimeout(function() {
              message.style.display = 'none';
            }, 500); // æ·¡å‡ºå‹•ç•«0.5ç§’å¾Œå®Œå…¨ç§»é™¤
          }, 5000); // 55ç§’å¾Œé–‹å§‹æ·¡å‡º
        });
      });
    </script>