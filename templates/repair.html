{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>XXè‚¡ä»½æœ‰é™å…¬å¸-ç¶­ä¿®å–®ç®¡ç†ç³»çµ±</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'css/style260122.css' %}" />
    <link rel="stylesheet" href="{% static 'css/sheet.css' %}">
    <script src="{% static 'js/JavaScript.js' %}"></script>
    <script src="{% static 'js/faeye.js' %}"></script>
  </head>
  <body class="login-bg">
    <!-- é ‚éƒ¨å°è¦½ -->
    <header>
      <div class="container">
        <nav>
          <!-- å…¬å¸åç¨± -->
          <div class="nav-brand">âœ¨ XXè‚¡ä»½æœ‰é™å…¬å¸ - ç¶­ä¿®å–®ç®¡ç†ç³»çµ±</div>
          
          <!-- å…¶ä»–å°èˆª -->
          <ul>
            {% if user.is_authenticated %}
            <li>
              <a class="meicon" id="workspace">
                <img src="{% static 'img/userform.gif' %}" width="30" height="30" />æ­¡è¿å›ä¾†
                {{ request.user.profile.user_name|default:request.user.username }}</a>
            </li>
            <li>
              <a class="meicon nav-link" href="{% url 'index' %}">
                <img src="{% static 'img/sign.gif' %}" width="30" height="30"/>é¦–é å…¬å‘Š
              </a>
            </li>
            <li><!--ç§»é™¤å·¢ç‹€ <a>ï¼Œä¸”ä¿®æ”¹meicon nav-link-->
              <a class="meicon nav-link" href="{% url 'repair' %}">
                <img src="{% static 'img/edit.gif' %}" width="30" height="30"/>ç¶­ä¿®å–®
              </a>
            </li>
            <!--æ–°å¢ä¿®æ”¹ç¶­ä¿®å–®é€£çµ-
            <li>
              <a class="meicon nav-link" href="{% url 'inquire' %}">
                <img src="{% static 'img/checklist.gif' %}" width="30" height="30"/>ä¿®æ”¹ç¶­ä¿®å–®
              </a>
            </li>
            -->
            <li>
              <a class="meicon nav-link" href="#">
              <img src="{% static 'img/registration.gif' %}" width="30" height="30" />æœå‹™åŠè¯çµ¡æ–¹å¼
              </a>
            </li>
            <!--ä½¿ç”¨è€…ç™»å…¥ç™»å‡ºåˆ‡æ›-->
        
            <li class="meicon">
              <img src="{% static 'img/logout.gif' %}" width="30" height="30" />
              <a class="nav-link" href="{% url 'logout' %}">{{ repair.get_repair_user_name }}ç™»å‡º</a>
            </li>
            {% else %}
            <li>
              <a class="meicon" id="workspace">
                <img src="{% static 'img/dossier.gif' %}" width="30" height="30" /> æ­¡è¿ï¼Œè«‹ç™»å…¥
                {{ request.user }} </a>
            </li>
            <li class="meicon">
              <img src="{% static 'img/logout.gif' %}" width="30" height="30" />
              <a class="nav-link" href="{% url 'login' %}">{{ repair.get_repair_user_name }}ç™»å…¥</a>
            </li>
            {% endif %}
          </ul>
        </nav>
      </div>
    </header>

  <!-- å°èˆªé¸å–® -->

  <div class="nav-container">
    <button id="openWinBtn" class="trigger-btn">æ–°å¢ç¶­ä¿®å–®</button>
      <div class="nav-tabs">
        <div class="time-chip">
          <span class="time-label">æ™‚é–“ï¼š</span>
          <span id="currentTime">è¼‰å…¥ä¸­...</span>
        </div>
          <button class="nav-tab active" data-page="home">ğŸ  ç¶­ä¿®ç´€éŒ„</button>
          <button class="nav-tab" data-page="dashboard">ğŸ“ è³‡æ–™åº«ä¿®æ”¹</button>
          <button class="nav-tab" data-page="settings">âš™ï¸ è¨­å®š</button>
      </div>
    </div>
    <!-- å„€è¡¨æ¿ -->
    <section class="page-content active" id="home">
      <div class="content-card">
        <h1>ğŸ“Š ç¶­ä¿®ç´€éŒ„è¡¨</h1>
    <div class="wrap">
      <table id="DataTalbe">
        <thead>
          <tr>
            <th>ç‹€æ…‹</th>
            <th>å–®è™Ÿ</th>
            <th>ç§‘å®¤</th>
            <th>å«ä¿®äºº</th>
            <th>åˆ†æ©Ÿ</th>
            <th>IP</th>
            <th>ç¶­ä¿®æ™‚é–“</th>
            <th>å·¥ç¨‹å¸«</th>
            <th>å ±ä¿®å•é¡Œ</th>
            <th>å›å¾©å ±ä¿®</th>
            <th>ç¶­ä¿®çµæŸ</th>
            <th>æ“ä½œ</th>
          </tr>
            </thead>
        <tbody>
          {% for repair in repairs %}
          <tr>
            <td>{{ repair.state }}</td>
            <td>{{ repair.id }}</td>
            <td>{{ repair.office }}</td>
            <td>{{ repair.name }}</td>
            <td>{{ repair.ext }}</td>
            <td>{{ repair.ip }}</td>
            <td>{{ repair.start }}</td>
            <td>{{ repair.get_repair_user_name }}</td>
            <td>{{ repair.Q }}</td>
            <td>{{ repair.A }}</td>
            <td>{{ repair.finish }}</td>
            <td>
              <a href="{% url 'update' repair.id %}" class="ghost-link">ä¿®æ”¹</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <!-- åˆ†é æ§åˆ¶ -->
    <div id="pagination" class="pagination-controls">
      <button id="prevPage" class="pagination-btn" type="button">ä¸Šä¸€é </button>
      <span id="pageInfo" class="page-info">ç¬¬ 1 é </span>
      <button id="nextPage" class="pagination-btn" type="button">ä¸‹ä¸€é </button>
    </div>
      </div>
    </section>
     

      <!-- æµ®å‹•è¦–çª— -->
  <div id="myWindow" class="window-container">
    <div class="window-header">
      <div class="window-controls">
        <span class="control close" id="closeWinBtn"></span>
        <span class="control minimize"></span>
        <span class="control maximize"></span>
      </div>
      <div class="window-title">æ–°å¢ç¶­ä¿®å–®</div>
    </div>
    <div class="window-content">
      <h3>æ–°å¢ç¶­ä¿®å–®</h3>
      <p>è«‹ç¢ºèªä¸€ä¸‹è³‡æ–™ç™»æ‰“æ­£ç¢ºã€‚</p>
      <form action="" method="POST">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>{{ repair.ip.label }}ï¼š</label>
            {{ repair.ip }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.ext.label }}ï¼š</label>
            {{ repair.ext }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.name.label }}ï¼š</label>
            {{ repair.name }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.share.label }}ï¼š</label>
            {{ repair.share }}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>{{ repair.jt.label }}ï¼š</label>
            {{ repair.jt }}
          </div>
          <!--é€™é‚Šé€™è¡Œä¸å¤ªéœ€è¦äº†
          <div class="form-group col-md-6">
            {{ repair.repair_user }}
          </div>-->
          <div class="form-group col-md-6">
            <label>{{ repair.location.label }}ï¼š</label>
            {{ repair.location }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.F.label }}ï¼š</label>
            <div style="display: flex; gap: 8px; align-items: center;">
              {{ repair.F }}
            </div>
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.office.label }}ï¼š</label>
            {{ repair.office }}
          </div>
        </div>
        
        <div class="form-rowQA">
          <div class="form-group col-md-12">
            <label>{{ repair.Q.label }}ï¼š</label>
            {{ repair.Q }}
          </div>
          <div class="form-group col-md-12">
            <label>{{ repair.A.label }}ï¼š</label>
            {{ repair.A }}
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>{{ repair.state.label }}ï¼š</label>
            {{ repair.state }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.start.label }}ï¼š</label>
            {{ repair.start }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.finish.label }}ï¼š</label>
            {{ repair.finish }}
          </div>
        </div>
        
        <div class="form-actions">
          {% csrf_token %}
          <button class="btn btn-primary" type="submit">âœ” å„²å­˜</button>
        </div>
      </form>
    </div>
    <div class="resizer"></div>
  </div>

    {% for repair in repairs %}
         
    {% endfor %}

      <!-- æµ®å‹•è¦–çª— - ä¿®æ”¹ç¶­ä¿®å–® -->
  <div id="updateWindow" class="window-container">
    <div class="window-header">
      <div class="window-controls">
        <span class="control close" id="closeUpdateWinBtn"></span>
        <span class="control minimize"></span>
        <span class="control maximize"></span>
      </div>
      <div class="window-title">ä¿®æ”¹ç¶­ä¿®å–®</div>
    </div>
    <div class="window-content">
      <h3>ä¿®æ”¹ç¶­ä¿®å–®</h3>
      <p>è«‹ç¢ºèªä¸€ä¸‹è³‡æ–™ç™»æ‰“æ­£ç¢ºã€‚</p>
      <form action="" method="POST">
        {% csrf_token %}
        
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>{{ repair.ip.label }}ï¼š</label>
            {{ repair.ip }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.ext.label }}ï¼š</label>
            {{ repair.ext }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.name.label }}ï¼š</label>
            {{ repair.name }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.share.label }}ï¼š</label>
            {{ repair.share }}
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>{{ repair.jt.label }}ï¼š</label>
            {{ repair.jt }}
          </div>
          {{ repair.repair_user }}
          <div class="form-group col-md-6">
            <label>{{ repair.location.label }}ï¼š</label>
            {{ repair.location }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.F.label }}ï¼š</label>
            {{ repair.F }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.office.label }}ï¼š</label>
            {{ repair.office }}
          </div>
        </div>
        
        <div class="form-rowQA">
          <div class="form-group col-md-12">
            <label>{{ repair.Q.label }}ï¼š</label>
            {{ repair.Q }}
          </div>
          <div class="form-group col-md-12">
            <label>{{ repair.A.label }}ï¼š</label>
            {{ repair.A }}
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>{{ repair.state.label }}ï¼š</label>
            {{ repair.state }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.start.label }}ï¼š</label>
            {{ repair.start }}
          </div>
          <div class="form-group col-md-6">
            <label>{{ repair.finish.label }}ï¼š</label>
            {{ repair.finish }}
          </div>
        </div>
        
        <div class="form-actions">
          <button class="btn btn-primary" type="submit">âœ” å„²å­˜</button>
        </div>
      </form>
    </div>
    <div class="resizer"></div>
  </div>
   


    <script>
      function updateTime() {
        const now = new Date() //æŠ“å–ç•¶ä¸‹æ™‚é–“
      
        //ç²å–å„å€‹æ™‚é–“éƒ¨ä»½
        const year = now.getFullYear() + 'å¹´'
        const month = String(now.getMonth() + 1).padStart(2, '0') + 'æœˆ'
        const day = String(now.getDate()).padStart(2, '0') + 'æ—¥ '
        const hours = String(now.getHours()).padStart(2, '0') + ':'
        const minutes = String(now.getMinutes()).padStart(2, '0') + ':'
        const seconds = String(now.getSeconds()).padStart(2, '0')
        //æ ¼å¼åŒ–æ•¸å­— å°æ–¼10è£œé›¶
        const formattedMinutes = minutes < 10 ? '0' + minutes : minutes
        const formattedSeconds = seconds < 10 ? '0' + seconds : seconds
        //çµ„åˆè¦é¡¯ç¤ºçš„æ™‚é–“
        const timeString = `${year}${month}${day}${hours}${formattedMinutes}${formattedSeconds}`
        //é¡¯ç¤ºåœ¨æŒ‡å®šä½ç½®
        document.getElementById('currentTime').textContent = timeString
      }
      //æ¯ç§’æ›´æ–°ä¸€æ¬¡æ™‚é–“
      setInterval(updateTime, 1000)
      //åˆå§‹å‘¼å«ä¸€æ¬¡ä»¥é¡¯ç¤ºæ™‚é–“
      updateTime()

      // è‡ªå‹•éš±è—è¨Šæ¯ï¼ˆ10ç§’å¾Œï¼‰ å‘¼æ‡‰62-71è¡Œ
      window.addEventListener('DOMContentLoaded', function() {
        const messages = document.querySelectorAll('.alert');
        messages.forEach(function(message) {
          setTimeout(function() {
            message.style.transition = 'opacity 0.5s ease-out';
            message.style.opacity = '0';
            setTimeout(function() {
              message.style.display = 'none';
            }, 500); // æ·¡å‡ºå‹•ç•«0.5ç§’å¾Œå®Œå…¨ç§»é™¤
          }, 5000); // 55ç§’å¾Œé–‹å§‹æ·¡å‡º
        });
      });
    </script>
{% endblock %}

