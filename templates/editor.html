<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CKEditor ç¶²é ç·¨è¼¯å™¨</title>
    <style>
        body {
            font-family:  "Microsoft JhengHei", Arial, sans-serif;
            max-width: 1200px;
            margin: 30px auto;
            padding: 20px;
            background:  #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .version-info {
            background: #e8f5e9;
            padding: 10px 15px;
            border-radius:  5px;
            margin-bottom: 20px;
            color: #2e7d32;
            font-size: 14px;
        }
        .editor-container {
            margin:  20px 0;
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .submit-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        .clear-btn {
            padding: 12px 24px;
            background: #f44336;
            color: white;
            border:  none;
            border-radius:  6px;
            cursor:  pointer;
            font-size:  16px;
            font-weight: bold;
            transition:  all 0.3s;
        }
        .clear-btn:hover {
            background: #d32f2f;
        }
        .save-btn {
            padding: 12px 24px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .save-btn:hover {
            background: #45a049;
        }
        .preview {
            margin-top: 30px;
            padding: 25px;
            border: 2px solid #e0e0e0;
            background-color: #fafafa;
            border-radius: 8px;
            display: none;
        }
        .preview h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        .preview-content {
            background:  white;
            padding: 20px;
            border-radius:  6px;
            min-height: 100px;
        }
        .stats {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #666;
        }
        .stats strong {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>è²¼æ–‡ç·¨è¼¯å™¨</h1>

        
        <div class="editor-container">
            <div id="editor">
               
            </div>
        </div>
        
        <div class="button-group">
            <button class="submit-btn" onclick="previewContent()">ğŸ‘ï¸ é è¦½å…§å®¹</button>
            <button class="save-btn" onclick="saveContent()">ğŸ’¾ å„²å­˜å…§å®¹</button>
            <button class="clear-btn" onclick="clearContent()">ğŸ—‘ï¸ å…¨éƒ¨æ¸…ç©º</button>
        </div>
        
        <div class="preview" id="preview">
            <h3>ğŸ“‹ é è¦½çµæœ</h3>
            <div class="preview-content" id="preview-content"></div>
            <div class="stats">
                <span>å­—æ•¸ï¼š<strong id="wordCount">0</strong></span>
                <span>å­—å…ƒæ•¸ï¼š<strong id="charCount">0</strong></span>
            </div>
        </div>
    </div>

    <!-- ä½¿ç”¨æœ€æ–°çš„ CKEditor 5 (å®‰å…¨ç‰ˆæœ¬ï¼Œç„¡è­¦å‘Š) -->
    <script src="https://cdn.ckeditor.com/ckeditor5/41.1.0/classic/ckeditor.js"></script>
    <script src="https://cdn.ckeditor.com/ckeditor5/41.1.0/classic/translations/zh.js"></script>
    
    <script>
        let editorInstance;
        
        // åˆå§‹åŒ– CKEditor 5
        ClassicEditor
            .create(document.querySelector('#editor'), {
                language: 'zh',
                toolbar: {
                    items: [
                        'heading', '|',
                        'bold', 'italic', 'underline', 'strikethrough', '|',
                        'link', 'bulletedList', 'numberedList', '|',
                        'outdent', 'indent', '|',
                        'alignment', '|',
                        'blockQuote', 'insertTable', '|',
                        'undo', 'redo'
                    ],
                    shouldNotGroupWhenFull: true
                },
                heading: {
                    options: [
                        { model:  'paragraph', title: 'æ®µè½', class: 'ck-heading_paragraph' },
                        { model: 'heading1', view: 'h1', title: 'æ¨™é¡Œ 1', class: 'ck-heading_heading1' },
                        { model: 'heading2', view:  'h2', title: 'æ¨™é¡Œ 2', class: 'ck-heading_heading2' },
                        { model:  'heading3', view: 'h3', title: 'æ¨™é¡Œ 3', class: 'ck-heading_heading3' }
                    ]
                }
            })
            .then(editor => {
                editorInstance = editor;
                console.log('âœ… CKEditor 5 åˆå§‹åŒ–æˆåŠŸï¼');
                
                // è‡ªå‹•æ¢å¾©å„²å­˜çš„å…§å®¹
                const savedContent = localStorage.getItem('editorContent');
                if (savedContent) {
                    if (confirm('ç™¼ç¾ä¸Šæ¬¡å„²å­˜çš„å…§å®¹ï¼Œè¦æ¢å¾©å—ï¼Ÿ')) {
                        editor.setData(savedContent);
                    }
                }
            })
            .catch(error => {
                console.error('ç·¨è¼¯å™¨åˆå§‹åŒ–å¤±æ•—ï¼š', error);
            });
        
        // é è¦½å…§å®¹
        function previewContent() {
            const content = editorInstance.getData();
            const previewDiv = document.getElementById('preview');
            const previewContent = document.getElementById('preview-content');
            
            previewContent.innerHTML = content;
            previewDiv.style.display = 'block';
            
            // è¨ˆç®—å­—æ•¸çµ±è¨ˆ
            const text = content.replace(/<[^>]*>/g, '').trim();
            const words = text.split(/\s+/).filter(w => w.length > 0);
            document.getElementById('wordCount').textContent = words.length;
            document.getElementById('charCount').textContent = text.length;
            
            // æ»¾å‹•åˆ°é è¦½å€
            previewDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            console.log('å…§å®¹é è¦½ï¼š', content);
        }
        
        // å„²å­˜å…§å®¹
        function saveContent() {
            const content = editorInstance.getData();
            localStorage.setItem('editorContent', content);
            localStorage.setItem('savedTime', new Date().toLocaleString('zh-TW'));
            
            alert('âœ… å…§å®¹å·²å„²å­˜ï¼\n' + 
                  'å„²å­˜æ™‚é–“ï¼š' + new Date().toLocaleString('zh-TW') + '\n' +
                  'å­—æ•¸ï¼š' + content.replace(/<[^>]*>/g, '').trim().split(/\s+/).length);
        }
        
        // æ¸…ç©ºå…§å®¹
        function clearContent() {
            if (confirm('âš ï¸ ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰å…§å®¹å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸï¼')) {
                editorInstance.setData('');
                document.getElementById('preview').style.display = 'none';
                localStorage.removeItem('editorContent');
                alert('âœ… å…§å®¹å·²æ¸…ç©ºï¼');
            }
        }
        
        // å®šæœŸè‡ªå‹•å„²å­˜ï¼ˆæ¯ 30 ç§’ï¼‰
        setInterval(() => {
            if (editorInstance) {
                const content = editorInstance.getData();
                if (content. trim()) {
                    localStorage.setItem('editorContent', content);
                    console.log('ğŸ”„ è‡ªå‹•å„²å­˜å®Œæˆ');
                }
            }
        }, 30000);
    </script>
</body>
</html>